I"ı(<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>

<h1 id="ë¯¸ë“¤ì›¨ì–´">ë¯¸ë“¤ì›¨ì–´</h1>

<h2 id="morgan">morgan</h2>

<p><code class="language-plaintext highlighter-rouge">morgan</code> ë¯¸ë“¤ì›¨ì–´ëŠ” ì½˜ì†”ì— ìš”ì²­ì— ëŒ€í•œ ì •ë³´ë¥¼ ê¸°ë¡í•´ì¤€ë‹¤.</p>

<p>ì‚¬ìš©ë²•</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">reqire</span><span class="p">(</span><span class="dl">'</span><span class="s1">morgan</span><span class="dl">'</span><span class="p">);</span>
<span class="p">...</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">(</span><span class="dl">'</span><span class="s1">dev</span><span class="dl">'</span><span class="p">));</span>
<span class="p">...</span>
</code></pre></div></div>
<p>ê°œë°œ ì‹œì—ëŠ” ì£¼ë¡œ <code class="language-plaintext highlighter-rouge">short</code>, <code class="language-plaintext highlighter-rouge">dev</code>ë¥¼ ì¸ìë¡œ ì£¼ë©°,
ë°°í¬ ì‹œì—ëŠ” <code class="language-plaintext highlighter-rouge">common</code>, <code class="language-plaintext highlighter-rouge">combined</code>ë¥¼ ì‚¬ìš©í•œë‹¤.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">parameter</th>
      <th style="text-align: left">format</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">tiny</code></td>
      <td style="text-align: left">:method :url :status :res[content-length] - :response-time ms</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">dev</code></td>
      <td style="text-align: left">:method :url :status :response-time ms - :res[content-length]</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">short</code></td>
      <td style="text-align: left">:remote-addr :remote-user :method :url HTTP/:http-version :status :res[content-length] - :response-time ms</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">common</code></td>
      <td style="text-align: left">:remote-addr - :remote-user [:date[clf]] â€œ:method :url HTTP/:http-versionâ€ :status :res[content-length]</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">combined</code></td>
      <td style="text-align: left">:remote-addr - :remote-user [:date[clf]] â€œ:method :url HTTP/:http-versionâ€ :status :res[content-length] â€œ:referrerâ€ â€œ:user-agentâ€</td>
    </tr>
  </tbody>
</table>

<p>ì°¸ê³ ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ë¡œê¹…ì„ ìœ„í•´ì„œëŠ” <code class="language-plaintext highlighter-rouge">winsotn</code>ëª¨ë“ˆì„ ë” ë§ì´ ì‚¬ìš©í•œë‹¤.</p>

<h2 id="body-parser">body-parser</h2>
<p>ìš”ì²­ ë³¸ë¬¸ í•´ì„ìš© ë¯¸ë“¤ì›¨ì–´ë‹¤. ë³´í†µ í¼ ë°ì´í„°ì™€ <code class="language-plaintext highlighter-rouge">AJAX</code> ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="kd">var</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">body-parser</span><span class="dl">'</span><span class="p">);</span>
<span class="p">...</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">raw</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>
<span class="p">...</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">raw</code>ëŠ” ë³¸ë¬¸ì´ ë²„í¼ì¼ ë•Œ, <code class="language-plaintext highlighter-rouge">text</code>ëŠ” ë³¸ë¬¸ì´ í…ìŠ¤íŠ¸ ë°ì´í„°ì¼ ë•Œ í•´ì„í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ì´ë‹¤.</p>

<p>jsonì€ <code class="language-plaintext highlighter-rouge">JSON</code> í˜•íƒœì˜ ì „ë‹¬ë°©ì‹ì´ë©° <code class="language-plaintext highlighter-rouge">url-encoded</code>ëŠ” ì£¼ì†Œ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë°©ì‹ì´ë‹¤. ë³´í†µ í¼ ì „ì†¡ì´ ì´ë¥¼ ì‚¬ìš©í•œë‹¤.
ì´ ë•Œ { extended: false }ë¼ëŠ” ì˜µì…˜ì€ falseì¼ ë…¸ë“œì˜ <code class="language-plaintext highlighter-rouge">querystring</code> ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ í•´ì„í•˜ê³  trueì´ë©´ <code class="language-plaintext highlighter-rouge">qs</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ì„í•œë‹¤.</p>

<p>4.16.0 ë²„ì „ë¶€í„° <code class="language-plaintext highlighter-rouge">express</code>ì— bodyParser ì¼ë¶€ ê¸°ëŠ¥ì´ ë‚´ì¥ë˜ì—ˆê¸° ë•Œë¬¸ì— ì„¤ì¹˜í•˜ì§€ ì•Šê³ ë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. ì‚¬ìš©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}));</span>
<span class="p">...</span>
</code></pre></div></div>

<h2 id="cookie-parser">cookie-parser</h2>
<p>ë™ë´‰ëœ ì¿ í‚¤ë¥¼ í•´ì„í•œë‹¤. ì‚¬ìš©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="kd">var</span> <span class="nx">cookieParser</span> <span class="o">=</span> <span class="nx">reqire</span><span class="p">(</span><span class="dl">'</span><span class="s1">cookie-parser</span><span class="dl">'</span><span class="p">);</span>
<span class="p">...</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cookieParser</span><span class="p">());</span>
<span class="p">...</span>
</code></pre></div></div>

<p>í•´ì„ëœ ì¿ í‚¤ëŠ” <code class="language-plaintext highlighter-rouge">req.cookies</code> ê°ì²´ì— ë“¤ì–´ê°€ê²Œ ëœë‹¤.
<code class="language-plaintext highlighter-rouge">name=b1n</code> ì¿ í‚¤ë¥¼ ë³´ëƒˆë‹¤ë©´ <code class="language-plaintext highlighter-rouge">req.cookies</code>ëŠ” { nmae: â€˜b1nâ€™ }ì´ë‹¤.</p>

<p>ì œê³µí•œ ë¬¸ìì—´ë¡œ ì„œëª…ëœ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ìœ¼ë©´ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cookieParser</span><span class="p">(</span><span class="dl">'</span><span class="s1">secret code</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<h2 id="static">static</h2>
<p><code class="language-plaintext highlighter-rouge">static</code> ë¯¸ë“¤ì›¨ì–´ëŠ” ì •ì  íŒŒì¼ë“¤ì„ ì œê³µí•œë‹¤.
ë‚´ì¥ëœ ë¯¸ë“¤ì›¨ì–´ì´ë‹¤.
ì‚¬ìš©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">)));</span>
<span class="p">...</span>
</code></pre></div></div>

<p>ì •ì ì¸ íŒŒì¼ë“¤ì´ ë‹´ê²¨ìˆëŠ” í´ë”ë¥¼ ì§€ì •í•˜ë©´ ëœë‹¤. í˜„ì¬ëŠ” public í´ë”ê°€ ì§€ì •ë˜ì–´ ìˆëŠ”ë°, <code class="language-plaintext highlighter-rouge">public/style/style.css</code>ë¥¼ ì ‘ê·¼í•˜ë ¤ë©´ localhost/st~/sty.cssë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
ì •ì íŒŒì¼ì„ ë”°ë¡œ <code class="language-plaintext highlighter-rouge">fs.readFile</code>ê³¼ ê°™ì´ ì‚¬ìš©í•˜ì—¬ ë³´ë‚´ì¤„ í•„ìš”ê°€ ì—†ë‹¤.</p>

<p>ì„œë²„ êµ¬ì¡°ì˜ íŒŒì•…ì„ ì§€ì–‘í•˜ê¸° ìœ„í•´ public í´ë”ëª…ì´ ë”°ë¡œ ì£¼ì†Œë¡œ ë…¸ì¶œë˜ì§€ ì•ŠëŠ” ê²ƒì„ ì£¼ëª©í•˜ì.
íŒŒì¼ êµ¬ì¡°ë¥¼ ì™„ì „íˆ íŒŒì•…í•˜ì§€ ëª»í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ ì œê³µí•  ì£¼ì†Œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/img</span><span class="dl">'</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">)));</span>
<span class="p">...</span>
</code></pre></div></div>

<blockquote>
  <font size="6">Refernce</font>
  <p><br />
ì¡°í—Œì˜, Node.js êµê³¼ì„œ, ê¸¸ë²—, 6ì¥ express<br />
https://www.npmjs.com/package/morgan<br /></p>
</blockquote>
:ET