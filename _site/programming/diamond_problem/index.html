<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Diamond Problem  |  untitled</title>
<meta name="description" content="Introduction">


  <meta name="author" content="조원빈">


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="untitled">
<meta property="og:title" content="Diamond Problem">
<meta property="og:url" content="http://localhost:4000/programming/diamond_problem/">


  <meta property="og:description" content="Introduction">







  <meta property="article:published_time" content="2020-12-12T00:00:00+09:00">



  <meta property="article:modified_time" content="2020-12-20T04:00:00+09:00">



  

  


<link rel="canonical" href="http://localhost:4000/programming/diamond_problem/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "조원빈",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="untitled Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          untitled
          <span class="site-subtitle">기록용 블로그입니다.</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/">Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/posts/">연도별 포스트</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">토글 메뉴</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/avatar_logo2.jpg" alt="조원빈" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">조원빈</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Was mich nicht umbringt, macht mich stärker.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">팔로우</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">South Korea</span>
        </li>
      

      
        
          
            <li><a href="mailto:lkic1625@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
        
          
        
          
        
          
            <li><a href="https://github.com/lkic1625" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.instagram.com/__b1n__/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i><span class="label">Instagram</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Diamond Problem">
    <meta itemprop="description" content="Introduction">
    <meta itemprop="datePublished" content="2020-12-12T00:00:00+09:00">
    <meta itemprop="dateModified" content="2020-12-20T04:00:00+09:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Diamond Problem
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 분 소요

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu">
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#multiple-inheritance">Multiple Inheritance</a></li>
  <li><a href="#diamond-problem">Diamond Problem</a>
    <ul>
      <li><a href="#in-c">in C++</a></li>
      <li><a href="#in-java">in Java</a>
        <ul>
          <li><a href="#default-method">Default Method</a>
            <ul>
              <li><a href="#reason-for-adding-default-and-static-methods-in-interfaces">Reason for adding default and static methods in interfaces</a></li>
            </ul>
          </li>
          <li><a href="#solution">solution</a></li>
        </ul>
      </li>
      <li><a href="#2-sub-interface가-우선권을-가진다">2. sub interface가 우선권을 가진다.</a></li>
      <li><a href="#그-외에는-명시한다">그 외에는 명시한다.</a></li>
    </ul>
  </li>
  <li><a href="#마치며">마치며,,</a></li>
</ul>

            </nav>
          </aside>
        
        <h1 id="introduction">Introduction</h1>

<p>다이아몬드 문제는 면접 때 들었던 다중상속에 관한 이야기다.</p>

<p>사실 최근에 객체지향언어를 자주 사용한 것도 아니라 답변을 못했다.
<br />배울 게 아직 많다고 느낀다.</p>

<p>긴 인트로는 싫어하니 바로 본론으로 들어가보자.</p>

<h1 id="overview">Overview</h1>

<p>오늘 알아 볼 주제는 <code class="language-plaintext highlighter-rouge">Diamond Problem</code>이다. <code class="language-plaintext highlighter-rouge">Diamond Problem</code>은 다중상속 시 일어나는 문제로써 이를 설명하기 위한 다이어그램이 꼭 다이아몬드와 같다해서 생겨난 별칭이다.</p>

<p><img src="/assets/images/330px-Diamond_inheritance.svg.png" alt="이미지" /></p>

<p>다양한 언어에서 이를 방지하기 위한 대책을 마련해두었는데, 이번 포스트에서는 <code class="language-plaintext highlighter-rouge">C++</code>, <code class="language-plaintext highlighter-rouge">Java</code>에서 어떻게 이를 해결하는지 이야기해보겠다.</p>

<h1 id="multiple-inheritance">Multiple Inheritance</h1>

<p>우선 다중 상속부터 먼저 설명해야겠다. 다중 상속은 말 그대로 하나 이상의 클래스를 상속받는 것이다. 자바에서는 클래스단위에서 다중 상속을 허용하지 않는데, <code class="language-plaintext highlighter-rouge">C++</code>은 허용한다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include&lt;iostream&gt;
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">A</span>
<span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">A</span><span class="p">()</span>  <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"A's constructor called"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">B</span>
<span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">B</span><span class="p">()</span>  <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"B's constructor called"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">C</span><span class="o">:</span> <span class="k">public</span> <span class="n">B</span><span class="p">,</span> <span class="k">public</span> <span class="n">A</span>  <span class="c1">// Note the order</span>
<span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">C</span><span class="p">()</span>  <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"C's constructor called"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">C</span> <span class="n">c</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>아래를 보지 않고도 출력이 어떻게 될지 머릿속에 그려진다면 어느정도 다중상속에 대한 지식이 있는 것 같아보인다.</p>

<p>참고로 소멸자는 생성자가 호출된 순서와 정반대로 호출된다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>B's constructor called
A's constructor called
C's constructor called
</code></pre></div></div>

<h1 id="diamond-problem">Diamond Problem</h1>

<h2 id="in-c">in C++</h2>

<p>다이아몬드 문제를 C++ 예제로 직접 살펴보자.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include&lt;iostream&gt;
</span><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="n">class</span> <span class="n">A</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">A</span><span class="p">()</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"A::A() "</span><span class="p">;</span> <span class="p">}</span>
    <span class="n">A</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="o">:</span> <span class="n">m_x</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"A::A("</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">") "</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">int</span> <span class="n">getX</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_x</span><span class="p">;</span> <span class="p">}</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">m_x</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">B</span> <span class="o">:</span> <span class="n">public</span> <span class="n">A</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">B</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="o">:</span><span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"B::B("</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">") "</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">C</span> <span class="o">:</span> <span class="n">public</span> <span class="n">A</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">C</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="o">:</span><span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"C::C("</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">") "</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">D</span> <span class="o">:</span>  <span class="n">public</span> <span class="n">C</span><span class="p">,</span>  <span class="n">public</span> <span class="n">B</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">D</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="o">:</span> <span class="n">C</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">B</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"D::D("</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">") "</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Create b(2): "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">B</span> <span class="n">b</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Create c(3): "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">C</span> <span class="n">c</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Create d(2,3): "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">D</span> <span class="n">d</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="c1">// error: request for member 'getX' is ambiguous</span>
    <span class="c1">//cout &lt;&lt; "d.getX() = " &lt;&lt; d.getX() &lt;&lt; endl;</span>

    <span class="c1">// error: 'A' is an ambiguous base of 'D'</span>
    <span class="c1">//cout &lt;&lt; "d.A::getX() = " &lt;&lt; d.A::getX() &lt;&lt; endl;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"d.B::getX() = "</span> <span class="o">&lt;&lt;</span> <span class="n">d</span><span class="p">.</span><span class="n">B</span><span class="o">::</span><span class="n">getX</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"d.C::getX() = "</span> <span class="o">&lt;&lt;</span> <span class="n">d</span><span class="p">.</span><span class="n">C</span><span class="o">::</span><span class="n">getX</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>뭔가 이상함을 느끼고 있는가? <code class="language-plaintext highlighter-rouge">A</code> 클래스를 상속받은 <code class="language-plaintext highlighter-rouge">B</code>와 <code class="language-plaintext highlighter-rouge">C</code>가 <code class="language-plaintext highlighter-rouge">D</code>를 상속중이다. 이 경우에 생성자는 어떻게 생성과 소멸을 반복할지 명확하지 않다.</p>

<p>위 코드의 출력은 어떻게 될까?</p>

<p>이러한 경우 상속 관계는 <code class="language-plaintext highlighter-rouge">A</code> 클래스가 <code class="language-plaintext highlighter-rouge">B</code>와 <code class="language-plaintext highlighter-rouge">C</code>를 상속했지만, 실제로 생성되는 인스턴스는 두 개의 <code class="language-plaintext highlighter-rouge">A</code>를 가지게 된다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>A   A  
|   |
B   C  
 \ /  
  D
</code></pre></div></div>

<p><b> output</b></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Create b(2):
A::A(2) B::B(2)

Create c(3):
A::A(3) C::C(3)

Create d(2,3):
A::A(2) C::C(2) A::A(3) B::B(3) D::D(2, 3)

d.B::getX() = 3
d.C::getX() = 2

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">C++</code>은 이를 막기위해 <code class="language-plaintext highlighter-rouge">virtual</code>이라는 키워드를 통해 다이아몬드 문제를 해결했다.</p>

<p><code class="language-plaintext highlighter-rouge">virtual</code>에 대한 자세한 설명은 내가 아니더라도 충분히 많은 블로그 및 문서에서 다룰 것이라 생각하기에 관련된 코드만을 올려두겠다.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="n">class</span> <span class="n">B</span> <span class="o">:</span> <span class="k">virtual</span> <span class="n">public</span> <span class="n">A</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">B</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="o">:</span><span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"B::B("</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">") "</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">C</span> <span class="o">:</span> <span class="k">virtual</span> <span class="n">public</span> <span class="n">A</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">C</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="o">:</span><span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"C::C("</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">") "</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
<span class="p">...</span>
</code></pre></div></div>

<p><b> output</b></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Create b(2):
A::A(2) B::B(2)

Create c(3):
A::A(3) C::C(3)

Create d(2,3):
A::A() C::C(2) B::B(3) D::D(2, 3)

d.B::getX() = 42
d.C::getX() = 42
</code></pre></div></div>

<p>결과값을 보고 알 수 있듯이 <code class="language-plaintext highlighter-rouge">virtual</code>을 사용한다면 하나의 <code class="language-plaintext highlighter-rouge">A</code>의 (기본생성자)생성자를 호출한다.</p>

<h2 id="in-java">in Java</h2>
<p>자바에서는 다이아몬드 문제를 막기위해 <code class="language-plaintext highlighter-rouge">interface</code>를 두어 그 외에 클래스는 다중상속을 불가능하게 했다.</p>

<p>긴 포스트를 읽느라 수고했다.</p>

<p><img src="/assets/images/IMG_0946.gif" alt="이미지" /></p>

<p>이렇게만 끝나면 재미없으나 고맙게도 다이아몬드 문제를 해결해야할 새로운 기능이 자바에 추가됐다.</p>

<h3 id="default-method">Default Method</h3>

<p>인터페이스는 원래 기능에 대한 선언만 가능하고 실제 구현은 포함될 수 없었다.</p>

<p>하지만 자바8부터는 이러한 룰을 깨고 메소드에 키워드 하나만 명시해도 인터페이스 내부에 코드를 작성할 수 있는 방법이 생겼다. 그것이 바로 <code class="language-plaintext highlighter-rouge">default method</code>이다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">MyInterface</span> <span class="o">{</span>
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">printHello</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="reason-for-adding-default-and-static-methods-in-interfaces">Reason for adding default and static methods in interfaces</h4>

<blockquote>
  <p>…(중략) … 바로 “하위 호환성”때문이다. 예를 들어 설명하자면, 여러분들이 만약 오픈 소스코드를 만들었다고 가정하자. 그 오픈소스가 엄청 유명해져서 전 세계 사람들이 다 사용하고 있는데, 인터페이스에 새로운 메소드를 만들어야 하는 상황이 발생했다. 자칫 잘못하면 내가 만든 오픈소스를 사용한 사람들은 전부 오류가 발생하고 수정을 해야 하는 일이 발생할 수도 있다. 이럴 때 사용하는 것이 바로 default 메소드다. <br /><br /> (자바의 신 2권)</p>
</blockquote>

<blockquote>
  <p>The main goal is to allow interface evolution, that is, the addition of new methods. If a new method is added to an interface, existing classes that implement the interface would be missing an implementation, which would be incompatible. To be compatible, an implementation has to come from somewhere, so it is provided by default methods.</p>
</blockquote>

<p>더 깊게 더 많이 설명하고 싶지만, 나중 포스팅을 위해 아껴두겠다.</p>

<h3 id="solution">solution</h3>

<p>자바8에서는 이 문제에 대해 3가지 규칙을 따른다.</p>

<ol>
  <li>클래스가 항상 우선순위를 가진다.
    <ul>
      <li>클래스나 슈퍼클래스에서 정의한 메서드가 <code class="language-plaintext highlighter-rouge">default method</code>보다 우선권을 가진다.</li>
    </ul>
  </li>
  <li>1번 규칙 이외의 상황에서는 <code class="language-plaintext highlighter-rouge">sub interface</code>가 우선권을 가진다.
    <ul>
      <li>상속관계를 갖는 인터페이스에서 <code class="language-plaintext highlighter-rouge">B</code>가 <code class="language-plaintext highlighter-rouge">A</code>를 상속받았을 경우 <code class="language-plaintext highlighter-rouge">B</code>가 우선권을 가진다.</li>
    </ul>
  </li>
  <li>그 외에는 명시한다.
    <ul>
      <li>자바8에서는 <code class="language-plaintext highlighter-rouge">parentClassName.super.methodName()</code>과 같은 형태의 새로운 문법을 제시하였다.</li>
    </ul>
  </li>
</ol>

<p>이해를 돕기 위해 몇 가지 예시와 함께 살펴보자.</p>

<h2 id="2-sub-interface가-우선권을-가진다">2. sub interface가 우선권을 가진다.</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">A</span> <span class="o">{</span>
       <span class="k">default</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World from A"</span><span class="o">);</span> <span class="o">}</span>
   <span class="o">}</span>
   <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">B</span> <span class="kd">extends</span> <span class="no">A</span> <span class="o">{</span>
       <span class="k">default</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World from B"</span><span class="o">);</span> <span class="o">}</span>
   <span class="o">}</span>
   <span class="kd">public</span> <span class="kd">class</span> <span class="nc">C</span> <span class="kd">implements</span> <span class="no">B</span><span class="o">,</span> <span class="no">A</span> <span class="o">{</span>
       <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
           <span class="k">new</span> <span class="nf">C</span><span class="o">().</span><span class="na">hello</span><span class="o">();</span><span class="c1">//Hello World from B:</span>
       <span class="o">}</span>
   <span class="o">}</span>
</code></pre></div></div>

<h2 id="그-외에는-명시한다">그 외에는 명시한다.</h2>

<p>만약 위 예제에서 클래스 B가 A를 상속받지 않았을 경우, 컴파일러는 아래와 같은 메세지를 발생시킨다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class C inherits unrelated defaults for hello() from types A and B
reference to hello is ambiguous, both method hello() in A and method hello() in B match.
</code></pre></div></div>

<p>첫 번째 에러 메세지 상속된 디폴트 메서드가 호출된 상황과 관계없이 출력된다.</p>

<p>자바8에서는 <code class="language-plaintext highlighter-rouge">parentClassName.super.methodName()</code>과 같은 형태의 새로운 문법을 제시하였다. 이를 사용하자면,</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">C</span> <span class="kd">implements</span> <span class="no">B</span><span class="o">,</span> <span class="no">A</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
            <span class="no">A</span><span class="o">.</span><span class="na">super</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span><span class="c1">//  Hello World from A.</span>
        <span class="o">}</span>
        <span class="o">...</span>
    <span class="o">}</span>
</code></pre></div></div>

<h1 id="마치며">마치며,,</h1>

<p>이번 포스팅에서는 다이아몬드 문제에 대해 알아보았다. 가장 기본적인 것이고 1학년 때도 이와같은 상황을 배웠었다.</p>

<p>아쉽게도 계속 머리에 담아두진 않았지만, 이번 포스팅을 통해 객체지향을 이해하는데 도움이 되었으면 좋겠다.</p>

<blockquote>
  <font size="6">Refernce</font>
  <ul>
    <li>https://www.geeksforgeeks.org/multiple-inheritance-in-c/</li>
    <li>https://en.wikipedia.org/wiki/Multiple_inheritance#cite_note-6</li>
    <li>https://goodgid.github.io/Java-8-Default-Method/</li>
    <li>https://stackoverflow.com/questions/29997052/reason-for-adding-default-and-static-methods-in-interfaces</li>
    <li>http://www.lambdafaq.org/what-about-the-diamond-problem/</li>
  </ul>
</blockquote>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#diamond-problem" class="page__taxonomy-item" rel="tag">diamond_problem</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#oop" class="page__taxonomy-item" rel="tag">OOP</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 카테고리: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#programming" class="page__taxonomy-item" rel="tag">programming</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time datetime="2020-12-20">December 20, 2020</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">공유하기</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Diamond+Problem%20http%3A%2F%2Flocalhost%3A4000%2Fprogramming%2Fdiamond_problem%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fprogramming%2Fdiamond_problem%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fprogramming%2Fdiamond_problem%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/backend/websocket/" class="pagination--pager" title="WebSocket
">이전</a>
    
    
      <a href="/redis/time_series_with_redis/" class="pagination--pager" title="시계열 데이터 관측(작성 중)
">다음</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">참고</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/redis/reids_03/" rel="permalink">Redis, Commands
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 분 소요

</p>
    
    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/js/prototype/" rel="permalink">prototype
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 분 소요

</p>
    
    <p class="archive__item-excerpt" itemprop="description">Introduction
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/programming/meaningful_naming/" rel="permalink">의미있는 변수명
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 분 소요

</p>
    
    <p class="archive__item-excerpt" itemprop="description">Introduction
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/redis/time_series_with_redis/" rel="permalink">시계열 데이터 관측(작성 중)
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  최대 1 분 소요

</p>
    
    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>팔로우:</strong></li>
    

    
      
        
      
        
      
        
          <li><a href="https://github.com/lkic1625" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
          <li><a href="https://www.instagram.com/__b1n__/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> 피드</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 조원빈. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
